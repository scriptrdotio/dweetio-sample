{"acl":{"read":"nobody","write":"nobody","execute":"scriptr"},"contentType":"application\/vnd.scriptr-javascript","userConfig":"\/*#*SCRIPTR_PLUGIN*#*{\"metadata\":{\"name\":\"SimpleDecisionTable\",\"plugindata\":{\"columns\":[{\"field\":\"recid\",\"caption\":\"Rec. Id\",\"size\":\"100%\",\"resizable\":true,\"hidden\":true,\"noDrag\":true},{\"field\":\"rowtype\",\"caption\":\"Type\",\"size\":\"100%\",\"hidden\":true,\"noDrag\":true},{\"field\":\"name\",\"caption\":\"\",\"size\":\"100%\",\"noDrag\":true,\"editable\":{\"type\":\"text\",\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\",\"items\":[],\"selected\":\"condition_4\"},\"sizeType\":\"%\",\"sizeCalculated\":\"225px\",\"min\":120,\"sizeCorrected\":\"20%\"},{\"field\":\"fieldType\",\"caption\":\"Type\",\"size\":\"100%\",\"noDrag\":true,\"editable\":{\"type\":\"select\",\"items\":[{\"id\":\"number\",\"text\":\"number\"},{\"id\":\"string\",\"text\":\"string\"},{\"id\":\"boolean\",\"text\":\"boolean\"},{\"id\":\"date\",\"text\":\"date\"},{\"id\":\"function\",\"text\":\"function\"}],\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\"},\"sizeType\":\"%\",\"sizeCalculated\":\"225px\",\"min\":120,\"sizeCorrected\":\"20%\"},{\"field\":\"rule1\",\"caption\":\"Rule 1\",\"size\":\"100%\",\"editable\":{\"type\":\"myType\",\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\",\"items\":[],\"selected\":\"\"},\"sizeType\":\"%\",\"sizeCalculated\":\"224px\",\"min\":120,\"sizeCorrected\":\"20%\"},{\"field\":\"rule2\",\"caption\":\"Rule 2\",\"size\":\"100%\",\"editable\":{\"type\":\"myType\",\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\",\"items\":[],\"selected\":\"\"},\"sizeType\":\"%\",\"sizeCalculated\":\"224px\",\"min\":120,\"sizeCorrected\":\"20%\"},{\"field\":\"rule3\",\"caption\":\"Rule 3\",\"size\":\"100%\",\"editable\":{\"type\":\"myType\",\"inTag\":\"\",\"outTag\":\"\",\"style\":\"\",\"items\":[],\"selected\":\"\"},\"sizeType\":\"%\",\"sizeCalculated\":\"224px\",\"min\":120,\"sizeCorrected\":\"20%\"}],\"records\":[{\"recid\":0,\"name\":\"pressure\",\"rowtype\":\"condition\",\"fieldType\":\"number\",\"style\":{\"2\":\"\",\"4\":\"\",\"5\":\"\",\"6\":\"\"},\"rule1\":\"> 150\",\"rule2\":\"> 70\",\"rule3\":\"< 70\"},{\"recid\":4,\"name\":\"count\",\"rowtype\":\"condition\",\"fieldType\":\"number\",\"style\":{\"2\":\"\",\"4\":\"\",\"5\":\"\",\"6\":\"\"},\"rule2\":\"> 2\"},{\"recid\":2,\"name\":\"intrusion\",\"rowtype\":\"action\",\"fieldType\":\"string\",\"attr\":\"action='true'\",\"style\":{\"2\":\"\",\"4\":\"\",\"5\":\"\",\"6\":\"\"},\"rule1\":\"true\",\"rule2\":\"true\",\"rule3\":\"false\"},{\"recid\":3,\"name\":\"\",\"rowtype\":\"action\",\"fieldType\":\"string\",\"attr\":\"action='true'\",\"style\":{\"2\":\"\"}}],\"prescript\":\"\\nif (!storage.local.pressure){ \/\/ initialize if this is the first time the script is invoked\\n  init(); \\n}else {\\n  \\n  \/\/ if detected pressure occurred less than 5 seconds before the first event, increment counter\\n  var now = new Date().getTime();  \\n  if (now - storage.local.pressure.time < 5000) {\\n    storage.local.pressure.count = storage.local.pressure.count + 1;\\n  }else {\\n    \/\/ if pressure was detected more than 5 seconds after first event, re-initialize\\n    init();\\n  }  \\n}\\n\\n\/\/ Add the value of the counter to the payload used by the decision table\\npl[\\\"count\\\"] = storage.local.pressure.count;\\n  \\nfunction init() {\\n  \\n  storage.local.pressure = {};\\n  storage.local.pressure.count = 1;\\n  storage.local.pressure.time = new Date().getTime();\\n}  \\n\\n\",\"postscript\":\"\/\/Variable \\\"decision\\\" is the object returned by the decision table execution.\\n\/\/Variable \\\"decision\\\" format is [{\\\"action1\\\": \\\"value1\\\", \\\"action2\\\":  \\\"value2\\\"}].\\nif (decision.intrusion) {\\n  var dweetio = require(\\\"dweet\\\");\\n  var dweeter = new dweetio.Dweet(\\\"main_entrance_door\\\");\\n  dweeter.postDweet({\\\"msg\\\":\\\"instrusion\\\"});\\n}\\nreturn decision;\",\"exclusive\":true}}}*#*#*\/"}